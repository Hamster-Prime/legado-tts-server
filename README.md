# ğŸ“– Legado TTS Server

<div align="center">

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.8+-blue.svg)
![Status](https://img.shields.io/badge/status-active-success.svg)

**ä¸ºå¼€æºé˜…è¯» (Legado) é‡èº«æ‰“é€ çš„èšåˆè¯­éŸ³åˆæˆæœåŠ¡**

[ç‰¹æ€§](#-ç‰¹æ€§) â€¢ [å®‰è£…](#-å®‰è£…) â€¢ [éƒ¨ç½²](#-éƒ¨ç½²) â€¢ [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—) â€¢ [API æ–‡æ¡£](#-api-æ–‡æ¡£)

</div>

---

## âœ¨ ç‰¹æ€§

Legado TTS Server æ˜¯ä¸€ä¸ªè½»é‡çº§çš„è¯­éŸ³åˆæˆä¸­é—´ä»¶ï¼Œæ—¨åœ¨ä¸ºé˜…è¯»ç±»APPæä¾›é«˜è´¨é‡ã€å¤šæºçš„TTSæœåŠ¡ã€‚

- **ğŸ¯ å¤šæºèšåˆ**ï¼šåŒæ—¶æ”¯æŒ **Edge TTS** (å…è´¹é«˜è´¨é‡)ã€**ç«å±±å¼•æ“** (Doubao)ã€**è…¾è®¯äº‘** TTSã€‚
- **ğŸ§  æ™ºèƒ½è·¯ç”±**ï¼šå•ä¸€æ¥å£ï¼Œåç«¯æ ¹æ®éŸ³è‰²å‚æ•°è‡ªåŠ¨åˆ†å‘è¯·æ±‚ï¼Œæ— éœ€åœ¨APPç«¯åˆ‡æ¢å¼•æ“ã€‚
- **ğŸ’» å¯è§†åŒ–ç®¡ç†**ï¼šæä¾›ä¼˜é›…çš„ Web ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒé…ç½®ã€æµ‹è¯•ã€çŠ¶æ€ç›‘æ§ã€‚
- **ğŸ”Œ ä¸€é”®é›†æˆ**ï¼šæ”¯æŒä¸€é”®å¤åˆ¶é…ç½®åˆ°å¼€æºé˜…è¯»ï¼Œæ— ç¼å¯¹æ¥ã€‚
- **ğŸ“Š æµé‡ç»Ÿè®¡**ï¼šå®æ—¶ç›‘æ§å„æœåŠ¡å•†çš„è°ƒç”¨é‡å’Œå­—ç¬¦æ•°ã€‚
- **ğŸ”’ å®‰å…¨éšç§**ï¼šæ•æ„Ÿå¯†é’¥è‡ªåŠ¨æ©ç æ˜¾ç¤ºï¼Œé˜²æ­¢æ³„éœ²ã€‚

## ğŸ§ æ”¯æŒéŸ³è‰²

### 1. Edge TTS (å…è´¹ & æ¨è)
å¾®è½¯æä¾›çš„å…è´¹é«˜è´¨é‡ç¥ç»ä¸ç½‘ç»œè¯­éŸ³ï¼Œæ— éœ€é…ç½® Key å³å¯ä½¿ç”¨ã€‚
- **20+ ç§ä¸­æ–‡éŸ³è‰²**ï¼šåŒ…æ‹¬æ™“æ™“ã€äº‘å¸Œã€äº‘å¥ã€æ™“ä¼Šç­‰çƒ­é—¨éŸ³è‰²ã€‚
- **é£æ ¼å¤šæ ·**ï¼šæ”¯æŒæ–°é—»ã€å®¢æœã€åŠ©ç†ã€èŠå¤©ç­‰å¤šç§è¯´è¯é£æ ¼ã€‚

### 2. ç«å±±å¼•æ“ (å­—èŠ‚è·³åŠ¨)
æä¾›æå…¶è‡ªç„¶çš„æ‹ŸäººåŒ–è¯­éŸ³ã€‚
- **8 ç§ç²¾å“éŸ³è‰²**ï¼šç¿ç¿ã€æ€æ€ã€è´´å¿ƒå¥³ç”Ÿã€é¸¡æ±¤å¦¹å¦¹ç­‰ã€‚
- **ç‰¹ç‚¹**ï¼šæƒ…æ„Ÿä¸°å¯Œï¼Œé€‚åˆå°è¯´æœ—è¯»ã€‚

### 3. è…¾è®¯äº‘ TTS
- **7 ç§åŸºç¡€éŸ³è‰²**ï¼šæ™ºèŠã€æ™ºæ–Œç­‰ã€‚
- **ç‰¹ç‚¹**ï¼šç¨³å®šï¼Œæ”¯æŒé•¿æ–‡æœ¬ã€‚

---

## ğŸ›  å®‰è£…

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- Linux / Windows / macOS

### 1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/Hamster-Prime/legado-tts-server.git
cd legado-tts-server
```

### 2. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
# æˆ–è€…ç›´æ¥å®‰è£…
pip install flask requests edge-tts
```

---

## ğŸš€ éƒ¨ç½²

### æ–¹æ³•ä¸€ï¼šç›´æ¥è¿è¡Œ (å¼€å‘/æµ‹è¯•)
```bash
python3 app.py
```
æœåŠ¡å°†åœ¨ `http://0.0.0.0:80` å¯åŠ¨ã€‚

### æ–¹æ³•äºŒï¼šSystemd æ‰˜ç®¡ (æ¨è Linux ç”Ÿäº§ç¯å¢ƒ)

1. ç¼–è¾‘ `legado-tts.service` æ–‡ä»¶ï¼Œæ ¹æ®å®é™…è·¯å¾„ä¿®æ”¹ `WorkingDirectory` å’Œ `ExecStart`ã€‚
2. å¤åˆ¶æœåŠ¡æ–‡ä»¶å¹¶å¯åŠ¨ï¼š
```bash
sudo cp legado-tts.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable --now legado-tts
```

### æ–¹æ³•ä¸‰ï¼šDocker (è®¡åˆ’ä¸­)
*Docker é•œåƒæ„å»ºæ”¯æŒå³å°†æ¨å‡º...*

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. è®¿é—®ç®¡ç†ç•Œé¢
åœ¨æµè§ˆå™¨æ‰“å¼€ `http://ä½ çš„æœåŠ¡å™¨IP`ã€‚

### 2. é…ç½®æœåŠ¡å•†
- **Edge TTS**ï¼šå¼€ç®±å³ç”¨ï¼Œæ— éœ€é…ç½®ã€‚
- **ç«å±±/è…¾è®¯äº‘**ï¼šåœ¨ "API è®¾ç½®" å¡ç‰‡ä¸­å¡«å…¥å¯¹åº”çš„ `AppID` / `SecretID` å’Œ `Token` / `Key`ã€‚

### 3. å¯¼å…¥åˆ°å¼€æºé˜…è¯»
1. åœ¨ç½‘é¡µä¸Šçš„ **"å¼€æºé˜…è¯»é…ç½®"** åŒºåŸŸï¼Œé€‰æ‹©ä½ å–œæ¬¢çš„é»˜è®¤éŸ³è‰²ã€‚
2. ç‚¹å‡» **"å¤åˆ¶é…ç½®"** æŒ‰é’®ã€‚
3. æ‰“å¼€å¼€æºé˜…è¯» APP -> **æœ—è¯»å¼•æ“** -> **ç½‘ç»œå¯¼å…¥** -> ç²˜è´´é…ç½®ã€‚

---

## ğŸ”Œ API æ–‡æ¡£

### è¯­éŸ³åˆæˆæ¥å£
`POST /speech/stream`

åç«¯ä¼šè‡ªåŠ¨æ ¹æ® `voice` å‚æ•°åˆ¤æ–­ä½¿ç”¨å“ªä¸ªæœåŠ¡å•†ã€‚

**è¯·æ±‚å‚æ•° (JSON):**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- |
| `text` | string | **å¿…å¡«**ï¼Œéœ€è¦æœ—è¯»çš„æ–‡æœ¬ | "ä½ å¥½ï¼Œä¸–ç•Œ" |
| `voice` | string | **å¿…å¡«**ï¼ŒéŸ³è‰²ID | "zh-CN-XiaoxiaoNeural" |
| `rate` | string | è¯­é€Ÿ (å¯é€‰) | "+0%" |

**è·¯ç”±è§„åˆ™:**
- `voice` åŒ…å« "Neural" -> **Edge TTS**
- `voice` ä¸ºçº¯æ•°å­— -> **è…¾è®¯äº‘**
- `voice` ä»¥ "zh_" å¼€å¤´ -> **ç«å±±å¼•æ“**

---

## ğŸ“„ License

MIT License Â© 2024 Hamster-Prime
